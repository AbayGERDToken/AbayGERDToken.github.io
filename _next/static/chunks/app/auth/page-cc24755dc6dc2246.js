(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1235],{3738:function(e,t,n){Promise.resolve().then(n.bind(n,51176))},51176:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(57437),s=n(2265),r=n(99376),o=n(32037),i=n(58511),l=n.n(i);function c(){let e=(0,r.useRouter)(),{login:t,logout:i,isLoading:c,error:u,isLogged:d,address:h}=(0,o.m)(),[m,f]=s.useState(null),[b,g]=s.useState(null),[p,x]=s.useState(!1),[y,_]=s.useState(!1);(0,s.useEffect)(()=>{d&&h?(async()=>{x(!0);try{let e=await w(h);e?g("Balance: ".concat(e," GERD")):g("Balance: 0.00 GERD")}catch(e){console.error("Balance check error:",e),g("Balance: Unable to fetch")}finally{x(!1)}})():g(null)},[d,h]);let w=async e=>{try{let t=new new(await Promise.all([n.e(6356),n.e(4879),n.e(1943)]).then(n.bind(n,51943))).default("https://bsc-dataseed1.binance.org:443").eth.Contract([{constant:!0,inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"}],"0x6B16DE4F92e91e91357b5b02640EBAf5be9CF83c"),a=await t.methods.decimals().call(),s=await t.methods.balanceOf(e).call();return(Number(s)/10**Number(a)).toFixed(2)}catch(e){return console.error("Error fetching balance:",e),null}},A=async e=>{try{f(null),g(null),await t(e)}catch(e){f(e instanceof Error?e.message:"Login failed. Please try again.")}},j=async()=>{try{f(null),g(null),await i()}catch(e){f(e instanceof Error?e.message:"Logout failed. Please try again.")}},N=async()=>{if(h)try{await navigator.clipboard.writeText(h),_(!0),setTimeout(()=>_(!1),2e3)}catch(e){console.error("Failed to copy address:",e)}},W=u||m;return(0,a.jsx)("div",{className:l().authContainer,children:(0,a.jsxs)("div",{className:l().authCard,children:[(0,a.jsxs)("div",{className:l().header,children:[(0,a.jsx)("div",{className:l().icon,children:(0,a.jsx)("i",{className:"fas fa-wallet"})}),(0,a.jsx)("h1",{className:l().title,children:"Welcome to GERD Token"}),(0,a.jsx)("p",{className:l().subtitle,children:"Sign in to access your wallet and claim tokens"})]}),W&&(0,a.jsxs)("div",{className:l().errorAlert,children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle me-2"}),(0,a.jsx)("strong",{children:"Error:"})," ",W,W.includes("not initialized")&&(0,a.jsx)("div",{className:l().errorDetails,style:{marginTop:"8px",fontSize:"12px"},children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{children:"Troubleshooting"}),(0,a.jsxs)("p",{style:{marginTop:"8px"},children:["Web3Auth failed to initialize. This may be due to:",(0,a.jsxs)("ul",{style:{paddingLeft:"20px",marginTop:"4px"},children:[(0,a.jsx)("li",{children:"Network connectivity issues"}),(0,a.jsx)("li",{children:"Browser restrictions on loading external scripts"}),(0,a.jsx)("li",{children:"Ad blockers or privacy extensions"})]}),"Please try:",(0,a.jsxs)("ul",{style:{paddingLeft:"20px",marginTop:"4px"},children:[(0,a.jsx)("li",{children:"Refreshing the page"}),(0,a.jsx)("li",{children:"Disabling browser extensions temporarily"}),(0,a.jsx)("li",{children:"Using a different browser"})]})]})]})})]}),d&&h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:l().successAlert,children:[(0,a.jsx)("i",{className:"fas fa-check-circle me-2"}),p?(0,a.jsxs)(a.Fragment,{children:["Wallet connected! Loading balance...",(0,a.jsx)("i",{className:"fas fa-spinner fa-spin ms-2"})]}):(0,a.jsxs)(a.Fragment,{children:["Wallet connected! ",b||"Balance: N/A"]})]}),(0,a.jsxs)("div",{className:l().addressContainer,children:[(0,a.jsx)("div",{className:l().addressLabel,children:"Wallet Address:"}),(0,a.jsxs)("div",{className:l().addressRow,children:[(0,a.jsx)("code",{className:l().addressText,children:h}),(0,a.jsxs)("button",{className:l().copyButton,onClick:N,title:"Copy address",children:[(0,a.jsx)("i",{className:"fas ".concat(y?"fa-check":"fa-copy")}),y?"Copied!":"Copy"]})]})]})]}),d&&(0,a.jsxs)("button",{className:l().disconnectButton,onClick:j,disabled:c,children:[(0,a.jsx)("i",{className:"fas fa-sign-out-alt me-2"}),"Disconnect Wallet"]}),d&&!p&&(0,a.jsxs)("button",{className:l().proceedButton,onClick:()=>e.push("/claim-form?address=".concat(h)),children:[(0,a.jsx)("i",{className:"fas fa-arrow-right me-2"}),"Proceed to Claim Form"]}),!d&&!W&&(0,a.jsxs)("div",{className:l().loginOptions,children:[(0,a.jsx)("button",{className:l().loginButton,onClick:()=>A("google"),disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin me-2"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fab fa-google me-2"}),"Continue with Google"]})}),(0,a.jsx)("button",{className:l().loginButton,onClick:()=>A("facebook"),disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin me-2"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fab fa-facebook me-2"}),"Continue with Facebook"]})})]}),!d&&W&&(0,a.jsxs)("button",{className:l().loginButton,onClick:()=>window.location.reload(),style:{marginTop:"10px"},children:[(0,a.jsx)("i",{className:"fas fa-redo me-2"}),"Retry"]}),(0,a.jsx)("div",{className:l().footer,children:(0,a.jsxs)("p",{className:l().footerText,children:[(0,a.jsx)("i",{className:"fas fa-shield-alt me-2"}),"Your credentials are secured with Web3Auth"]})})]})})}},32037:function(e,t,n){"use strict";n.d(t,{Web3AuthProvider:function(){return c},m:function(){return u}});var a=n(57437),s=n(2265);let r={EIP155:"eip155"},o=null,i=async()=>{if(o)return o;try{return new Promise(async e=>{setTimeout(async()=>{try{let t=window.ethereum,a=!!t;if(a&&console.log("[Web3Auth] Detected existing ethereum provider, working around property conflict..."),o=(await Promise.all([n.e(4957),n.e(1866),n.e(3814),n.e(9496),n.e(6971),n.e(6356),n.e(373),n.e(6650)]).then(n.bind(n,69259))).Web3Auth,a&&window.ethereum!==t&&(console.log("[Web3Auth] Restoring original ethereum provider"),Object.defineProperty(window,"ethereum",{value:t,writable:!1,configurable:!0})),!o){console.error("[Web3Auth] Module loaded but Web3Auth is undefined"),e(null);return}console.log("[Web3Auth] Library loaded successfully"),e(o)}catch(t){if(console.error("[Web3Auth] Failed to load library:",t instanceof Error?t.message:t),t instanceof Error&&t.message.includes("ethereum")){console.log("[Web3Auth] Ethereum property conflict detected, continuing anyway...");try{if(o=(await Promise.all([n.e(4957),n.e(1866),n.e(3814),n.e(9496),n.e(6971),n.e(6356),n.e(373),n.e(6650)]).then(n.bind(n,69259))).Web3Auth){console.log("[Web3Auth] Successfully recovered from ethereum property error"),e(o);return}}catch(e){console.error("[Web3Auth] Retry failed:",e)}}e(null)}},100)})}catch(e){return console.error("[Web3Auth] Failed to load Web3Auth module:",e instanceof Error?e.message:e),null}},l=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[o,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),[f,b]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[x,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e="BNcEwCq57jR5I5e5DPH4MXK0QXUIcMfFDjOC7-z3CH7hdBs3xIszdCbbfXgMdhzAOvJaJgb9zZQRFZu7vhP3nGM";if(console.log("[Web3Auth] Initializing... clientId present:",!!e),e)console.log("[Web3Auth] Client ID length:",e.length),console.log("[Web3Auth] Client ID first 20 chars:",e.substring(0,20));else{console.log("[Web3Auth] CLIENT ID IS UNDEFINED OR EMPTY"),y("Web3Auth is not configured. Missing NEXT_PUBLIC_WEB3AUTH_CLIENT_ID environment variable."),m(!1);return}console.log("[Web3Auth] Loading Web3Auth library...");let t=await i();if(!t){console.error("[Web3Auth] Library load failed"),y("Web3Auth library failed to load. The @web3auth/modal package may not be available."),m(!1);return}console.log("[Web3Auth] Library loaded, creating instance with clientId:",e.substring(0,10)+"...");try{let n=new t({clientId:e,web3AuthNetwork:"sapphire_devnet",chainConfig:{chainNamespace:r.EIP155,chainId:"0x38",rpcTarget:"https://bsc-dataseed1.binance.org:443",displayName:"Binance Smart Chain",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance Coin"}});if(console.log("[Web3Auth] Instance created, calling init()..."),await n.init(),console.log("[Web3Auth] Init complete, checking status..."),c(n),"connected"===n.status){console.log("[Web3Auth] Already connected, fetching account..."),d(n.provider);let e=await _(n.provider);p(e),b(!0)}else console.log("[Web3Auth] Ready for login, status:",n.status)}catch(t){let e=t instanceof Error?t.message:String(t);console.error("[Web3Auth] Failed to create/initialize instance:",e),y("Web3Auth initialization failed: ".concat(e)),m(!1);return}}catch(t){let e=t instanceof Error?t.message:"Failed to initialize Web3Auth";console.error("[Web3Auth] Init error:",t),console.error("[Web3Auth] Error message:",e),console.error("[Web3Auth] Stack:",t instanceof Error?t.stack:"No stack trace"),y(e)}finally{m(!1)}})()},[]);let _=async e=>{if(!e)return null;try{let t=await e.request({method:"eth_accounts"});return Array.isArray(t)&&t.length>0?t[0]:null}catch(e){return console.error("Error getting account:",e),null}},w=async e=>{try{if(y(null),!o)throw Error("Web3Auth not initialized");console.log("[Web3Auth] Logging in with provider:",e);let t=await o.connect();if(t){console.log("[Web3Auth] Login successful, fetching account..."),d(t);let e=await _(t);p(e),b(!0)}}catch(t){let e=t instanceof Error?t.message:"Login failed";throw console.error("[Web3Auth] Login error:",t),y(e),t}},A=async()=>{try{if(!o)throw Error("Web3Auth not initialized");await o.logout(),d(null),p(null),b(!1)}catch(e){throw console.error("Logout error:",e),e}},j=async e=>{try{if(!u||!g)return null;let t=new new(await Promise.all([n.e(6356),n.e(4879),n.e(1943)]).then(n.bind(n,51943))).default("https://bsc-dataseed1.binance.org:443").eth.Contract([{constant:!0,inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"}],e),a=await t.methods.decimals().call(),s=await t.methods.balanceOf(g).call();return(Number(s)/10**Number(a)).toFixed(2)}catch(e){return console.error("Error fetching balance:",e),null}};return(0,a.jsx)(l.Provider,{value:{web3auth:o,provider:u,isLoading:h,isLogged:f,address:g,error:x,login:w,logout:A,getUserBalance:j},children:t})}function u(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useWeb3Auth must be used within Web3AuthProvider");return e}},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},58511:function(e){e.exports={authContainer:"auth_authContainer__PUpxE",authCard:"auth_authCard__PPlHI",header:"auth_header__RGNy2",icon:"auth_icon__g6RW5",title:"auth_title__saMM4",subtitle:"auth_subtitle__aClGr",errorAlert:"auth_errorAlert__3B0hT",successAlert:"auth_successAlert__i0EHt",addressContainer:"auth_addressContainer__9vB80",addressLabel:"auth_addressLabel__3Lkmn",addressRow:"auth_addressRow__T6vyx",addressText:"auth_addressText__rewsG",copyButton:"auth_copyButton__chW7n",loginOptions:"auth_loginOptions__St1YR",loginButton:"auth_loginButton__5U0gh",proceedButton:"auth_proceedButton__cGocG",disconnectButton:"auth_disconnectButton__mBi6x",footer:"auth_footer__CPqgI",footerText:"auth_footerText__hemoJ"}}},function(e){e.O(0,[2604,2971,2117,1744],function(){return e(e.s=3738)}),_N_E=e.O()}]);